{"ast":null,"code":"import axios from \"axios\";\nimport { CART_ADD_ITEM, CART_REMOVE_ITEM, CART_SAVE_SHIPPING_ADDRESS, CART_SAVE_PAYMENT_METHOD, CALCULAR_FRETE_FAIL, CALCULAR_FRETE_REQUEST, CALCULAR_FRETE_SUCCESS } from \"../constants/cartConstants\";\nexport const addToCart = (id, qtd) => async (dispatch, getState) => {\n  const {\n    data\n  } = await axios.get(`/api/products/${id}`);\n  dispatch({\n    type: CART_ADD_ITEM,\n    payload: {\n      product: data._id,\n      name: data.name,\n      image: data.image,\n      price: data.price,\n      countInStock: data.countInStock,\n      qtd\n    }\n  });\n  localStorage.setItem(\"cartItems\", JSON.stringify(getState().cart.cartItems));\n};\nexport const removefromcart = id => (dispatch, getState) => {\n  dispatch({\n    type: CART_REMOVE_ITEM,\n    payload: id\n  });\n  localStorage.setItem(\"cartItems\", JSON.stringify(getState().cart.cartItems));\n};\nexport const saveShippingAddress = data => (dispatch, getState) => {\n  dispatch({\n    type: CART_SAVE_SHIPPING_ADDRESS,\n    payload: data\n  });\n  localStorage.setItem(\"shippingAddress\", JSON.stringify(getState().cart.shippingAddress));\n};\nexport const savePaymentMethod = data => dispatch => {\n  dispatch({\n    type: CART_SAVE_PAYMENT_METHOD,\n    payload: data\n  });\n  localStorage.setItem(\"paymentMethod\", JSON.stringify(data));\n};\nexport const calcularFrete = price => async dispatch => {\n  try {\n    dispatch({\n      type: CALCULAR_FRETE_REQUEST\n    });\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    const cepDestino = localStorage.getItem(\"shippingAddress\");\n    const pesoProduto = 10;\n    console.log(cepDestino, pesoProduto);\n    const {\n      data\n    } = await axios.post(`api/correios/frete`, {\n      cepDestino,\n      pesoProduto\n    }, config);\n    console.log(data);\n    price = data.valorpac;\n    dispatch({\n      type: CALCULAR_FRETE_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: CALCULAR_FRETE_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};","map":{"version":3,"names":["axios","CART_ADD_ITEM","CART_REMOVE_ITEM","CART_SAVE_SHIPPING_ADDRESS","CART_SAVE_PAYMENT_METHOD","CALCULAR_FRETE_FAIL","CALCULAR_FRETE_REQUEST","CALCULAR_FRETE_SUCCESS","addToCart","id","qtd","dispatch","getState","data","get","type","payload","product","_id","name","image","price","countInStock","localStorage","setItem","JSON","stringify","cart","cartItems","removefromcart","saveShippingAddress","shippingAddress","savePaymentMethod","calcularFrete","config","headers","cepDestino","getItem","pesoProduto","console","log","post","valorpac","error","response","message"],"sources":["C:/Users/josef/OneDrive/Área de Trabalho/IFSC/PI/e-commerce/client/src/redux/actions/cartActions.jsx"],"sourcesContent":["import axios from \"axios\";\r\nimport {\r\n  CART_ADD_ITEM,\r\n  CART_REMOVE_ITEM,\r\n  CART_SAVE_SHIPPING_ADDRESS,\r\n  CART_SAVE_PAYMENT_METHOD,\r\n  CALCULAR_FRETE_FAIL,\r\n  CALCULAR_FRETE_REQUEST,\r\n  CALCULAR_FRETE_SUCCESS\r\n} from \"../constants/cartConstants\";\r\n\r\nexport const addToCart = (id, qtd) => async (dispatch, getState) => {\r\n  const { data } = await axios.get(`/api/products/${id}`);\r\n\r\n  dispatch({\r\n    type: CART_ADD_ITEM,\r\n    payload: {\r\n      product: data._id,\r\n      name: data.name,\r\n      image: data.image,\r\n      price: data.price,\r\n      countInStock: data.countInStock,\r\n      qtd,\r\n    },\r\n  });\r\n\r\n  localStorage.setItem(\"cartItems\", JSON.stringify(getState().cart.cartItems));\r\n};\r\n\r\nexport const removefromcart = (id) => (dispatch, getState) => {\r\n  dispatch({\r\n    type: CART_REMOVE_ITEM,\r\n    payload: id,\r\n  });\r\n\r\n  localStorage.setItem(\"cartItems\", JSON.stringify(getState().cart.cartItems));\r\n};\r\n\r\n\r\nexport const saveShippingAddress = (data) => (dispatch, getState) => {\r\n  dispatch({\r\n    type: CART_SAVE_SHIPPING_ADDRESS,\r\n    payload: data,\r\n  });\r\n\r\n  localStorage.setItem(\"shippingAddress\", JSON.stringify(getState().cart.shippingAddress));\r\n};\r\n\r\n\r\nexport const savePaymentMethod = (data) => (dispatch) => {\r\n  dispatch({\r\n    type: CART_SAVE_PAYMENT_METHOD,\r\n    payload: data,\r\n  });\r\n\r\n  localStorage.setItem(\"paymentMethod\", JSON.stringify(data));\r\n};\r\n\r\nexport const calcularFrete = (price) => async(dispatch) => {\r\n  try {\r\n    dispatch({ type: CALCULAR_FRETE_REQUEST });\r\n\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n\r\n    const cepDestino = localStorage.getItem(\"shippingAddress\");\r\n    const pesoProduto = 10;\r\n\r\n    console.log(cepDestino, pesoProduto);\r\n\r\n    const { data } = await axios.post(\r\n      `api/correios/frete`,\r\n      {cepDestino, pesoProduto},\r\n      config\r\n    );\r\n\r\n    console.log(data);\r\n    price = data.valorpac;\r\n    dispatch({ type: CALCULAR_FRETE_SUCCESS, payload: data });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: CALCULAR_FRETE_FAIL,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}